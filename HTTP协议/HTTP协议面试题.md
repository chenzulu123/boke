### HTTP 协议面试题

##### 1、说一下什么是 Http 协议？

对器客户端和 服务器端之间数据传输的格式规范，格式简称为“超文本传输协议”。

##### 2、什么是 Http 协议无状态协议？怎么解决 Http 协议无状态协议？（曾经去某创业公司问到）

无状态协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息

###### 无状态协议解决办法： 通过

- 1、Cookie
- 2、通过 Session 会话保存。

##### 3、说一下 Http 协议中 302 状态(阿里经常问)

http 协议中，返回状态码 302 表示重定向。
这种情况下，服务器返回的头部信息中会包含一个 Location 字段，内容是重定向到的 url。

##### 4、Http 协议有什么组成？

请求报文包含三部分：

请求行：包含请求方法、URI、HTTP 版本信息
请求首部字段
请求内容实体

响应报文包含三部分：

状态行：包含 HTTP 版本、状态码、状态码的原因短语
响应首部字段
响应内容实体
说一下网络传输的过程

##### 5、Http 协议中有那些请求方式？

- GET： 用于请求访问已经被 URI（统一资源标识符）识别的资源，可以通过 URL 传参给服务器

- POST：用于传输信息给服务器，主要功能与 GET 方法类似，但一般推荐使用 POST 方式。

- PUT： 传输文件，报文主体中包含文件内容，保存到对应 URI 位置。

* HEAD： 获得报文首部，与 GET 方法类似，只是不返回报文主体，一般用于验证 URI 是否有效。
* DELETE：删除文件，与 PUT 方法相反，删除对应 URI 位置的文件。
* OPTIONS：查询相应 URI 支持的 HTTP 方法。

##### 6、Http 协议中 Http1.0 与 1.1 区别？

在 http1.0 中，当建立连接后，客户端发送一个请求，服务器端返回一个信息后就关闭连接，当浏览器下次请求的时候又要建立连接，显然这种不断建立连接的方式，会造成很多问题。
在 http1.1 中，引入了持续连接的概念，通过这种连接，浏览器可以建立一个连接之后，发送请求并得到返回信息，然后继续发送请求再次等到返回信息，也就是说客户端可以连续发送多个请求，而不用等待每一个响应的到来。

##### 7、get 与 post 请求区别？（初级程序员必备问题）

区别一：

get 重点在从服务器上获取资源。
post 重点在向服务器发送数据。
区别二：

get 传输数据是通过 URL 请求，以 field（字段）= value 的形式，置于 URL 后，并用"?"连接，多个请求数据间用"&"连接，如http://127.0.0.1/Test/login.action?name=admin&password=admin，这个过程用户是可见的。
post 传输数据通过 Http 的 post 机制，将字段与对应值封存在请求实体中发送给服务器，这个过程对用户是不可见的。
区别三：

Get 传输的数据量小，因为受 URL 长度限制，但效率较高。
Post 可以传输大量数据，所以上传文件时只能用 Post 方式。
区别四：

get 是不安全的，因为 URL 是可见的，可能会泄露私密信息，如密码等。
post 较 get 安全性较高。
区别五：

get 方式只能支持 ASCII 字符，向服务器传的中文字符可能会乱码。
post 支持标准字符集，可以正确传递中文字符。

##### 8、常见 Http 协议状态？

200：请求被正常处理

204：请求被受理但没有资源可以返回

206：客户端只是请求资源的一部分，服务器只对请求的部分资源执行 GET 方法，相应报文中通过 Content-Range 指定范围的资源。

301：永久性重定向

302：临时重定向

303：与 302 状态码有相似功能，只是它希望客户端在请求一个 URI 的时候，能通过 GET 方法重定向到另一个 URI 上

304：发送附带条件的请求时，条件不满足时返回，与重定向无关

307：临时重定向，与 302 类似，只是强制要求使用 POST 方法

400：请求报文语法有误，服务器无法识别

401：请求需要认证

403：请求的对应资源禁止被访问

404：服务器无法找到对应资源

500：服务器内部错误

503：服务器正忙

##### 9、Http 协议首部字段？

a、通用首部字段（请求报文与响应报文都会使用的首部字段）

Date：创建报文时间
Connection：连接的管理
Cache-Control：缓存的控制
Transfer-Encoding：报文主体的传输编码方式
b、请求首部字段（请求报文会使用的首部字段）

Host：请求资源所在服务器
Accept：可处理的媒体类型
Accept-Charset：可接收的字符集
Accept-Encoding：可接受的内容编码
Accept-Language：可接受的自然语言
c、响应首部字段（响应报文会使用的首部字段）

Accept-Ranges：可接受的字节范围
Location：令客户端重新定向到的 URI
Server：HTTP 服务器的安装信息
d、实体首部字段（请求报文与响应报文的的实体部分使用的首部字段）

Allow：资源可支持的 HTTP 方法
Content-Type：实体主类的类型
Content-Encoding：实体主体适用的编码方式
Content-Language：实体主体的自然语言
Content-Length：实体主体的的字节数
Content-Range：实体主体的位置范围，一般用于发出部分请求时使用

##### 10、Http 与 Https 优缺点？

通信使用明文不加密，内容可能被窃听，也就是被抓包分析。
不验证通信方身份，可能遭到伪装
无法验证报文完整性，可能被篡改
HTTPS 就是 HTTP 加上加密处理（一般是 SSL 安全通信线路）+认证+完整性保护

##### 11、Http 优化

利用负载均衡优化和加速 HTTP 应用
利用 HTTP Cache 来优化网站

##### 12、Http 协议有那些特征？

- 1、支持客户/服务器模式；
- 2、简单快速；
- 3、灵活；
- 4、无连接；
- 5、无状态。

##### 13、HTTP 协议实现的原理机制

（1）整个流程步骤：

（2）域名解析过程：

(3).三次握手过程

(4).发起 Http 请求

(5).响应 Http 请求并得到 HTML 代码

(6).浏览器解析 HTML 代码

(7).浏览器对页面进行渲染呈现给用户

##### 14、Cookie 是否会被覆盖,localStorage 是否会被覆盖

Cookie 是可以覆盖的，如果重复写入同名的 Cookie，那么将会覆盖之前的 Cookie
如果要删除某个 Cookie，只需要新建一个同名的 Cookie，并将 maxAge 设置为 0，并添加到 response 中覆盖原来的 Cookie。注意是 0 而不是负数。负数代表其他的意义。

localStorage 存储在一个对象中. 有键值对
什么是 localStorage,在 HTML5 中，新加入了一个 localStorage 特性，这个特性主要是用来作为本地存储来使用的，解决了 cookie 存储空间不足的问题(cookie 中每条 cookie 的存储空间为 4k)，localStorage 中一般浏览器支持的是 5M 大小，这个在不同的浏览器中 localStorage 会有所不同。

###### localStorage 的优势

- localStorage 拓展了 cookie 的 4K 限制
- localStorage 会可以将第一次请求的数据直接存储到本地，这个相当于一个 5M 大小的针对于前端页面的数据库，相比于 cookie 可以节约带宽，但是这个却是只有在高版本的浏览器中才支持的

###### localStorage 的局限

- 浏览器的大小不统一，并且在 IE8 以上的 IE 版本才支持 localStorage 这个属性
- 目前所有的浏览器中都会把 localStorage 的值类型限定为 string 类型，这个在对我们日常比较常见的 JSON 对象类型需要一些转换
- localStorage 在浏览器的隐私模式下面是不可读取的
- localStorage 本质上是对字符串的读取，如果存储内容多的话会消耗内存空间，会导致页面变卡
- localStorage 不能被爬虫抓取到
  localStorage 与 sessionStorage 的唯一一点区别就是 localStorage 属于永久性存储，而 sessionStorage 属于当会话结束的时候，sessionStorage 中的键值对会被清空

##### 15、一次完整的 HTTP 请求所经历的 7 个步骤

HTTP 通信机制是在一次完整的 HTTP 通信过程中，Web 浏览器与 Web 服务器之间将完成下列 7 个步骤：

###### 1） 建立 TCP 连接

在 HTTP 工作开始之前，Web 浏览器首先要通过网络与 Web 服务器建立连接，该连接是通过 TCP 来完成的，该协议与 IP 协议共同构建 Internet，即著名的 TCP/IP 协议族，因此 Internet 又被称作是 TCP/IP 网络。HTTP 是比 TCP 更高层次的应用层协议，根据规则， 只有低层协议建立之后才能，才能进行更层协议的连接，因此，首先要建立 TCP 连接，一般 TCP 连接的端口号是 80。

###### 2） Web 浏览器向 Web 服务器发送请求行

一旦建立了 TCP 连接，Web 浏览器就会向 Web 服务器发送请求命令。例如：GET /sample/hello.jsp HTTP/1.1。

###### 3） Web 浏览器发送请求头

浏览器发送其请求命令之后，还要以头信息的形式向 Web 服务器发送一些别的信息，之后浏览器发送了一空白行来通知服务器，它已经结束了该头信息的发送。

###### 4）Web 服务器应答

客户机向服务器发出请求后，服务器会客户机回送应答， HTTP/1.1 200 OK ，应答的第一部分是协议的版本号和应答状态码。

###### 5）Web 服务器发送应答头

正如客户端会随同请求发送关于自身的信息一样，服务器也会随同应答向用户发送关于它自己的数据及被请求的文档。

###### 6）Web 服务器向浏览器发送数据

Web 服务器向浏览器发送头信息后，它会发送一个空白行来表示头信息的发送到此为结束，接着，它就以 Content-Type 应答头信息所描述的格式发送用户所请求的实际数据。

###### 7）Web 服务器关闭 TCP 连接

一般情况下，一旦 Web 服务器向浏览器发送了请求数据，它就要关闭 TCP 连接，然后如果浏览器或者服务器在其头信息加入了这行代码：

###### 7）Connection:keep-alive

TCP 连接在发送后将仍然保持打开状态，于是，浏览器可以继续通过相同的连接发送请求。保持连接节省了为每个请求建立新连接所需的时间，还节约了网络带宽。

建立 TCP 连接->发送请求行->发送请求头->（到达服务器）发送状态行->发送响应头->发送响应数据->断 TCP 连接
